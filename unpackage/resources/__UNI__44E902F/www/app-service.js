if("undefined"==typeof Promise||Promise.prototype.finally||(Promise.prototype.finally=function(e){const t=this.constructor;return this.then((o=>t.resolve(e()).then((()=>o))),(o=>t.resolve(e()).then((()=>{throw o}))))}),"undefined"!=typeof uni&&uni&&uni.requireGlobal){const e=uni.requireGlobal();ArrayBuffer=e.ArrayBuffer,Int8Array=e.Int8Array,Uint8Array=e.Uint8Array,Uint8ClampedArray=e.Uint8ClampedArray,Int16Array=e.Int16Array,Uint16Array=e.Uint16Array,Int32Array=e.Int32Array,Uint32Array=e.Uint32Array,Float32Array=e.Float32Array,Float64Array=e.Float64Array,BigInt64Array=e.BigInt64Array,BigUint64Array=e.BigUint64Array}uni.restoreGlobal&&uni.restoreGlobal(Vue,weex,plus,setTimeout,clearTimeout,setInterval,clearInterval),function(e){"use strict";function t(e,t,...o){uni.__log__?uni.__log__(e,t,...o):console[e].apply(console,[...o,t])}__definePage("pages/index/index",((e,t)=>{const o=e.__vccOpts||e;for(const[r,a]of t)o[r]=a;return o})({data:()=>({orderStatus:"",socketOpen:!1,selectedProduct:null,products:[{id:"P-1001",name:"光伏电池板",price:199,tag:"测试商品",image:"https://q4.itc.cn/images01/20241223/084b3f28c95647c896a31f81f15e5901.png"}]}),onLoad(){this.connectWebSocket()},methods:{connectWebSocket(){const e=uni.connectSocket({url:"ws://localhost:8080",success:()=>{t("log","at pages/index/index.vue:98","WebSocket连接发起成功")}});e.onOpen((()=>{this.socketOpen=!0,t("log","at pages/index/index.vue:104","WebSocket已打开")})),e.onMessage((e=>{this.orderStatus=e.data})),e.onClose((()=>{this.socketOpen=!1,t("log","at pages/index/index.vue:113","WebSocket已关闭")})),e.onError((e=>{this.socketOpen=!1,t("error","at pages/index/index.vue:118","WebSocket连接出错",e)}))},selectProduct(e){this.selectedProduct=e},placeOrder(){if(!this.selectedProduct)return void uni.showToast({title:"请先选择商品",icon:"none"});const e=`商品ID: ${this.selectedProduct.id}`;this.socketOpen?uni.sendSocketMessage({data:e,success:()=>{this.orderStatus=`${this.selectedProduct.name} 下单成功，等待确认...`},fail:()=>{this.orderStatus="下单失败，请稍后重试"}}):this.orderStatus="连接未建立，无法下单"}}},[["render",function(t,o,r,a,c,n){return e.openBlock(),e.createElementBlock("view",{class:"page"},[e.createElementVNode("view",{class:"header"},[e.createElementVNode("text",{class:"badge"},"LIVE"),e.createElementVNode("view",{class:"title-wrap"},[e.createElementVNode("text",{class:"title"},"智能装备应用"),e.createElementVNode("text",{class:"subtitle"},"智能制造 · 即时下单")])]),e.createElementVNode("view",{class:"player-card"},[e.createElementVNode("video",{id:"rtmpVideo",class:"player",src:"http://10.50.126.113:8085/hls/test.m3u8",controls:"",autoplay:"","enable-progress-gesture":!1,"object-fit":"contain"},null,8,["src"]),e.createElementVNode("view",{class:"live-info"},[e.createElementVNode("text",{class:"live-title"},"十八届山东省职业院校技能大赛"),e.createElementVNode("text",{class:"live-desc"},"基于电商订单驱动的柔性智能制造系统")])]),e.createElementVNode("view",{class:"section"},[e.createElementVNode("view",{class:"section-title"},[e.createElementVNode("text",{class:"dot"}),e.createElementVNode("text",null,"商品精选")]),e.createElementVNode("scroll-view",{class:"product-list","scroll-x":""},[(e.openBlock(!0),e.createElementBlock(e.Fragment,null,e.renderList(c.products,(t=>(e.openBlock(),e.createElementBlock("view",{key:t.id,class:e.normalizeClass(["product-card",{active:c.selectedProduct&&c.selectedProduct.id===t.id}]),onClick:e=>n.selectProduct(t)},[e.createElementVNode("image",{class:"product-image",src:t.image,mode:"aspectFill"},null,8,["src"]),e.createElementVNode("view",{class:"product-info"},[e.createElementVNode("text",{class:"product-name"},e.toDisplayString(t.name),1),e.createElementVNode("text",{class:"product-tag"},e.toDisplayString(t.tag),1),e.createElementVNode("view",{class:"product-footer"},[e.createElementVNode("text",{class:"product-price"},"¥"+e.toDisplayString(t.price),1),e.createElementVNode("text",{class:"choose-text"},e.toDisplayString(c.selectedProduct&&c.selectedProduct.id===t.id?"已选":"选择"),1)])])],10,["onClick"])))),128))])]),e.createElementVNode("view",{class:"action-card"},[e.createElementVNode("view",null,[e.createElementVNode("text",{class:"action-title"},"下单中心"),e.createElementVNode("text",{class:"action-desc"}," 请选择心仪的商品并确认下单，订单状态会实时显示 ")]),e.createElementVNode("button",{class:"order-btn",type:"primary",onClick:o[0]||(o[0]=(...e)=>n.placeOrder&&n.placeOrder(...e))},e.toDisplayString(c.selectedProduct?`下单：${c.selectedProduct.name}`:"请选择商品后下单"),1)]),c.orderStatus?(e.openBlock(),e.createElementBlock("view",{key:0,class:"status-card"},[e.createElementVNode("view",{class:"status-title"},"订单状态"),e.createElementVNode("text",{class:"status-text"},e.toDisplayString(c.orderStatus),1)])):e.createCommentVNode("",!0)])}],["__scopeId","data-v-d57a0258"]]));const o={onLaunch:function(){t("log","at App.vue:4","App Launch")},onShow:function(){t("log","at App.vue:7","App Show")},onHide:function(){t("log","at App.vue:10","App Hide")}};const{app:r,Vuex:a,Pinia:c}={app:e.createVueApp(o)};uni.Vuex=a,uni.Pinia=c,r.provide("__globalStyles",__uniConfig.styles),r._component.mpType="app",r._component.render=()=>{},r.mount("#app")}(Vue);
